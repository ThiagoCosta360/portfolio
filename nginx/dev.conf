server {
	listen 80;

	location / {
		# redirect to frontend
		proxy_pass http://front:1000;
		# nginx create a websocket tunnel and need this configuration to work properly
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "Upgrade";
		proxy_set_header Host $host;
	}

	location /api {
		# nginx will receive '/api${path}' and redirect to back as '${path}'
		rewrite /api(.*) $1  break;
		# redirect to backend
		proxy_pass http://back:2000;
	}
}
